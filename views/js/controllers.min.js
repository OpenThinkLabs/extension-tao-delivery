define("taoDelivery/controller/routes",[],function(){return{Delivery:{actions:{editDelivery:"controller/delivery/editDelivery",excludeTesttaker:"controller/delivery/testtaker"}}}}),define("taoDelivery/controller/delivery/editDelivery",["jquery","helpers","ui/modal"],function($,helpers){return{start:function(){$("#exclude-btn").click(function(){var delivery=$(this).data("delivery");$("#testtaker-form").load(helpers._url("excludeTesttaker","Delivery","taoDelivery",{uri:delivery}),function(){$("body").prepend($("#modal-container")),$("#testtaker-form").modal()})})}}}),define("taoDelivery/controller/delivery/testtaker",["jquery","i18n","helpers","module","layout/section","ui/feedback"],function($,__,helpers,module,section,feedback){function switchList(){var target,current=$(this).parent().attr("id");
"excludedList"==current?target=$("#assignedList"):"assignedList"==current&&(target=$("#excludedList")),"undefined"!=typeof target&&(target.append(this),this.scrollIntoView())}var timeout,$search=$("#tt-filter"),$list=$("#assignedList"),liveSearch=function(){var pattern=$search.val();clearTimeout(timeout),timeout=setTimeout(function(){filterList(new RegExp(pattern),$list)},300)},filterList=function(regex,list){list.children().each(function(index,element){null===$(element).text().match(regex)?$(element).hide():$(element).show()})};return{start:function(){$("#save-tt").click(function(){var excluded=[];$("#excludedList > li").each(function(){excluded.push($(this).data("uri"))
});var assemblyUri=$('input[name="assemblyUri"]').val();$.ajax({url:helpers._url("saveExcluded","Delivery","taoDelivery"),type:"POST",data:{uri:assemblyUri,excluded:JSON.stringify(excluded)},dataType:"json",success:function(response){response.saved&&(feedback().success(__("Selection saved successfully")),section.loadContentBlock(helpers._url("editDelivery","Delivery","taoDelivery"),{uri:assemblyUri}))}})}),$("#assignedList > li").click(switchList),$("#excludedList > li").click(switchList),$("#close-tt").click(function(){$("#testtaker-form").modal("close")}),$search.keyup(liveSearch).siblings(".ctrl").click(liveSearch)}}}),define("taoDelivery/controller/runtime/deliveryExecution",["jquery","iframeResizer","context","layout/loading-bar"],function($,iframeResizer,context,loadingBar){function resizeMainFrame(){var height=$(window).outerHeight()-$headerHeight-$footerHeight;
$frameContainer.height(height),$frame.height(height)}var $frameContainer,$frame,$headerHeight,$footerHeight;return{start:function(options){$frameContainer=$("#outer-delivery-iframe-container"),$frame=$frameContainer.find("iframe"),$headerHeight=$("body > .content-wrap > header").outerHeight()||0,$footerHeight=$("body > footer").outerHeight()||0,$(document).on("serviceforbidden",function(){window.location=context.root_url+"tao/Main/logout"});var serviceApi=options.serviceApi;serviceApi.onFinish(function(){$.ajax({url:options.finishDeliveryExecution,data:{deliveryExecution:options.deliveryExecution},type:"post",dataType:"json",success:function(data){window.location=data.destination
}})}),$(document).on("loading",function(){loadingBar.start()}).on("unloading",function(){setTimeout(function(){loadingBar.stop()},300)}).on("shutdown-com",function(){$(document).off("heightchange"),$frame.off("load.eventHeight").off("load.cors")}),serviceApi.loadInto($frame.get(0)),$(window).bind("resize",function(){resizeMainFrame()}),resizeMainFrame()}}});
//# sourceMappingURL=routes.js
//# sourceMappingURL=controllers.min.js.map