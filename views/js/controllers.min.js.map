{"version":3,"file":"routes.js","sources":["routes.js","deliveryAssembly.js","runtime/deliveryExecution.js","runtime/index.js","testtaker.js"],"names":["define","Delivery","deps","actions","excludeTesttaker","$","__","helpers","feedback","module","start","conf","config","message","info","click","status","val","uri","ajax","url","_url","type","dataType","data","success","trigger","selectNode","error","jqXHR","textStatus","errorThrown","t","e","exports","amd","Spinner","this","o","i","document","createElement","n","arguments","length","appendChild","s","a","join","f","l","Math","max","u","substring","indexOf","toLowerCase","d","r","insertRule","cssRules","style","charAt","toUpperCase","slice","undefined","x","offsetLeft","y","offsetTop","offsetParent","c","opts","defaults","p","h","addRule","prototype","lines","coordsize","coordorigin","width","height","rotation","left","arcsize","corners","radius","top","filter","color","opacity","position","shadow","firstChild","childNodes","getElementsByTagName","sheet","styleSheet","rotate","direction","speed","trail","fps","zIndex","className","spin","stop","el","insertBefore","offsetWidth","parseInt","offsetHeight","setAttribute","m","g","v","timeout","setTimeout","clearTimeout","parentNode","removeChild","background","boxShadow","transformOrigin","transform","borderRadius","hwaccel","animation","behavior","adj","iframeResizer","context","loading","reverse","appendTo","body","get","unloading","fadeOut","remove","resizeMainFrame","$frame","windowHeight","window","controlHeight","$control","outerHeight","newHeight","navigator","userAgent","match","css","options","on","location","root_url","serviceApi","onFinish","finishDeliveryExecution","deliveryExecution","destination","off","loadInto","bind","appConfig","getElementById","getAttribute","require","mouseover","addClass","mouseleave","removeClass","section","switchList","target","current","parent","attr","append","scrollIntoView","$search","$list","liveSearch","pattern","filterList","RegExp","regex","list","children","each","index","element","text","hide","show","excluded","push","assemblyUri","JSON","stringify","response","saved","loadContentBlock","modal","keyup","siblings"],"mappings":"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","sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n * \n * \n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoDelivery/controller/routes',[],function(){\n    'use strict';\n\n    return {\n        'Delivery': {\n            'deps' : 'controller/deliveryAssembly',\n            'actions' : {\n\t            'excludeTesttaker' : 'controller/testtaker'\n            }\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\ndefine('taoDelivery/controller/deliveryAssembly',['jquery', 'i18n', 'helpers', 'ui/feedback', 'module'], function ($, __, helpers, feedback, module) {\n\n        return {\n            start : function(){\n                var conf = module.config();\n                \n                if(conf.message){\n                    feedback().info(conf.message);\n                }\n                \n                $('#saver-status').click(function(e){\n                \tvar status = $('input[name=\"status\"]:checked').val();\n                \tvar uri = $('input[name=\"assemblyUri\"]').val();\n                    $.ajax({\n            \t        url: helpers._url('setStatus', 'Delivery', 'taoDelivery'),\n            \t        type: \"POST\",\n            \t        dataType: \"text\",\n            \t        data: {uri : uri, status: status},\n            \t        success: function (data, textStatus, jqXHR){\n                        \tfeedback().success(__(\"Status saved\"));\n                            $('.tree').trigger('refresh.taotree', [{\n                                selectNode : uri\n                            }]);\n            \t        },\n            \t        error: function (jqXHR, textStatus, errorThrown) {\n                        \tfeedback().error('Error occured: ' + errorThrown);\n            \t        }\n                    });\n            \t});\n            }\n        };\n});\n\n\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\ndefine('taoDelivery/controller/runtime/deliveryExecution',['jquery', 'iframeResizer', 'spin', 'context'], function($, iframeResizer, Spinner, context){\n    \n    function loading(reverse) {\n        if($('#overlay').length === 0){\n            \n            $('<div id=\"overlay\"></div>').appendTo(document.body);\n            $('<div id=\"loading\"><div></div></div>').appendTo(document.body);\n        }\n\n        var opts = {\n                lines: 11, // The number of lines to draw\n                length: 21, // The length of each line\n                width: 8, // The line thickness\n                radius: 36, // The radius of the inner circle\n                corners: 1, // Corner roundness (0..1)\n                rotate: 0, // The rotation offset\n                direction: (reverse === true) ? -1 : 1, // 1: clockwise, -1: counterclockwise\n                color: '#888', // #rgb or #rrggbb or array of colors\n                speed: 1.5, // Rounds per second\n                trail: 60, // Afterglow percentage\n                shadow: false, // Whether to render a shadow\n                hwaccel: false, // Whether to use hardware acceleration\n                className: 'spinner', // The CSS class to assign to the spinner\n                zIndex: 2e9, // The z-index (defaults to 2000000000)\n        };\n        new Spinner(opts).spin($('#loading > div').get(0));\n    }\n    \n    function unloading() {\n        setTimeout(function(){\n            $('#loading').fadeOut(300, function(){\n                $(this).remove();\n                $('#overlay').remove();\n            });\n        }, 300);\n    }\n    \n    function resizeMainFrame() {\n        var $frame = $('#iframeDeliveryExec');\n        var windowHeight = $(window).height();\n        var controlHeight = 0;\n        var $control = $('#control');\n        \n        if ($control.length === 1) {\n            controlHeight = $control.outerHeight(true);\n        }\n        \n        var newHeight = windowHeight - controlHeight;\n        \n        if (navigator.userAgent.match(/(iPad|iPhone|iPod)/g) ? true : false == true) {\n            newHeight -= 20;\n        }\n        \n        $frame.css('height', newHeight + 'px');\n    }\n    \n    return {\n        start: function(options){\n            \n            $(document).on('serviceforbidden', function() {\n                window.location = context.root_url + 'tao/Main/logout';\n            });\n\n            var $frame = $('#iframeDeliveryExec');\n            $('#tools').css('height', 'auto');\n            \n            var serviceApi = options.serviceApi;\n\n            serviceApi.onFinish(function() {\n                $.ajax({\n                    url : options.finishDeliveryExecution,\n                    data : {\n                        'deliveryExecution' : options.deliveryExecution\n                    },\n                    type : 'post',\n                    dataType : 'json',\n                    success : function(data) {\n                        window.location = data.destination;\n                    }\n                });\n            });\n            \n            $(document)\n                .on('loading', function(e, reverse){\n                    loading(reverse);\n                })\n                .on('unloading', function(){\n                    unloading();\n                })\n                .on('shutdown-com', function(){\n                    //use when we want to stop all exchange between frames\n                    $(document).off('heightchange');\n                    $frame.off('load.eventHeight')\n                           .off('load.cors');\n                });\n            \n            serviceApi.loadInto($frame.get(0));\n            \n            $(window).bind('resize', function() {\n                resizeMainFrame();\n            });\n            \n            resizeMainFrame();\n        }\n    };\n});\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\n(function(){\n    //the url of the app config is set into the data-config attr of the loader.\n    var appConfig = document.getElementById('amd-loader').getAttribute('data-config');\n    require([appConfig], function(){\n   \n        require(['jquery'], function($){\n            $('ul li').mouseover(function() {\n                $(\"a .actionsBox .button\", this).addClass(\"buttonSelected\");\n            });\n            $('ul li').mouseleave(function() {\n                $(\"a .actionsBox .button\", this).removeClass(\"buttonSelected\");\n            });\n        });\n    });\n\n}());\n\ndefine(\"taoDelivery/controller/runtime/index\", function(){});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\ndefine('taoDelivery/controller/testtaker',['jquery', 'i18n', 'helpers', 'module', 'layout/section', 'ui/feedback'], \nfunction ($, __, helpers, module, section, feedback) {\n    'use strict';\n\n\tfunction switchList() {\n\t\tvar current = $(this).parent().attr('id');\n        var target; \n\t\tif (current == 'excludedList') {\n\t\t\ttarget = $('#assignedList'); \n\t\t} else if (current == 'assignedList') {\n\t\t\ttarget = $('#excludedList');\n\t\t}\n\t\tif (typeof target !== 'undefined') {\n\t\t\ttarget.append(this);\n\t\t\tthis.scrollIntoView();\n\t\t}\n\t}\n\t\n\tvar $search = $('#tt-filter');\n    var $list   = $('#assignedList');\n    var timeout;\n    \n    var liveSearch = function(){\n        var pattern = $search.val();\n        clearTimeout(timeout);\n        timeout = setTimeout(function(){\n        \tfilterList(new RegExp(pattern), $list);\n        }, 300);\n    };\n    \n    var filterList = function(regex, list) {\n    \tlist.children().each(function(index, element) {\n    \t\tif ($(element).text().match(regex) === null) {\n    \t\t\t$(element).hide();\n    \t\t} else {\n    \t\t\t$(element).show();\n    \t\t}\n    \t});\n    };\n\t\n    return {\n        start : function(){\n\t        $('#save-tt').click(function() {\n\t        \tvar excluded = [];\n\t        \t$('#excludedList > li').each(function(index) {\n\t        \t\texcluded.push($(this).data('uri'));\n\t        \t});\n\t        \tvar assemblyUri = $('input[name=\"assemblyUri\"]').val();\n\t        \t$.ajax({\n\t        \t\turl: helpers._url('saveExcluded', 'Delivery', 'taoDelivery'),\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\turi: assemblyUri,\n\t\t\t\t\t\texcluded: JSON.stringify(excluded)\n\t\t\t\t\t},\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tsuccess: function(response) {\n\t\t\t\t\t\tif (response.saved) {\n                            feedback().success(__('Selection saved successfully'));\n                            section.loadContentBlock(helpers._url('editDelivery', 'Delivery', 'taoDelivery'), {uri: assemblyUri});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t        });\n        \t$('#assignedList > li').click(switchList);\n        \t$('#excludedList > li').click(switchList);\n        \t\n        \t$('#close-tt').click(function() {\n        \t\t$('#testtaker-form').modal('close');\n        \t});\n                \n            //trigger the search on keyp and on the magnifer button click\n            $search.keyup(liveSearch).siblings('.ctrl').click(liveSearch);\n        \t\n        }\n    };\n});\n\n\n\n"]}